language: python

python:
    - "2.6"
    - "2.7"
    - "3.3"

install:
    - if [ "$TRAVIS_PYTHON_VERSION" == "2.6" ]; then pip --quiet install unittest2; fi
    - python setup.py --quiet install

script:
    - python setup.py --quiet test
    - py3kwarn setup.py
    - py3kwarn example.py | grep --quiet 'FixExcept'
    - nosetests -w py3kwarn2to3/tests

after_success:
    - pip install --quiet --use-mirrors coveralls
    - coverage run --branch --omit='*/py3kwarn2to3/*,*/site-packages/*,*/distutils/*' setup.py --quiet test
    - coverage report --show-missing
    - coveralls
